{##}

<div class="flex justify-between mb-5 md:hidden">
    <button class="flex border border-gray-300 py-3 pr-8 pl-3 mr-2 rounded items-center">
        <svg class="mr-4" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.99967 13.3334C10.9163 13.3334 11.6663 14.0834 11.6663 15C11.6663 15.9167 10.9163 16.6667 9.99967 16.6667C9.08301 16.6667 8.33301 15.9167 8.33301 15C8.33301 14.0834 9.08301 13.3334 9.99967 13.3334ZM9.99967 8.33337C10.9163 8.33337 11.6663 9.08337 11.6663 10C11.6663 10.9167 10.9163 11.6667 9.99967 11.6667C9.08301 11.6667 8.33301 10.9167 8.33301 10C8.33301 9.08337 9.08301 8.33337 9.99967 8.33337ZM9.99967 3.33337C10.9163 3.33337 11.6663 4.08337 11.6663 5.00004C11.6663 5.91671 10.9163 6.66671 9.99967 6.66671C9.08301 6.66671 8.33301 5.91671 8.33301 5.00004C8.33301 4.08337 9.08301 3.33337 9.99967 3.33337ZM4.99967 13.3334C5.91634 13.3334 6.66634 14.0834 6.66634 15C6.66634 15.9167 5.91634 16.6667 4.99967 16.6667C4.08301 16.6667 3.33301 15.9167 3.33301 15C3.33301 14.0834 4.08301 13.3334 4.99967 13.3334ZM4.99967 8.33337C5.91634 8.33337 6.66634 9.08337 6.66634 10C6.66634 10.9167 5.91634 11.6667 4.99967 11.6667C4.08301 11.6667 3.33301 10.9167 3.33301 10C3.33301 9.08337 4.08301 8.33337 4.99967 8.33337ZM4.99967 3.33337C5.91634 3.33337 6.66634 4.08337 6.66634 5.00004C6.66634 5.91671 5.91634 6.66671 4.99967 6.66671C4.08301 6.66671 3.33301 5.91671 3.33301 5.00004C3.33301 4.08337 4.08301 3.33337 4.99967 3.33337ZM14.9997 13.3334C15.9163 13.3334 16.6663 14.0834 16.6663 15C16.6663 15.9167 15.9163 16.6667 14.9997 16.6667C14.083 16.6667 13.333 15.9167 13.333 15C13.333 14.0834 14.083 13.3334 14.9997 13.3334ZM14.9997 8.33337C15.9163 8.33337 16.6663 9.08337 16.6663 10C16.6663 10.9167 15.9163 11.6667 14.9997 11.6667C14.083 11.6667 13.333 10.9167 13.333 10C13.333 9.08337 14.083 8.33337 14.9997 8.33337ZM14.9997 3.33337C15.9163 3.33337 16.6663 4.08337 16.6663 5.00004C16.6663 5.91671 15.9163 6.66671 14.9997 6.66671C14.083 6.66671 13.333 5.91671 13.333 5.00004C13.333 4.08337 14.083 3.33337 14.9997 3.33337Z" fill="#4B5563"/>
        </svg>
        <span>{{'text_heading_category'|_}}</span>
    </button>
    <div class="_off-canvas">
        <button class="_show flex border border-gray-300 py-3 pr-16 pl-3 rounded items-center">
            <svg class="mr-4" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="5" width="16" height="1.4" rx="0.7" fill="#4B5563"/>
                <rect x="4" y="9" width="12" height="1.4" rx="0.7" fill="#4B5563"/>
                <rect x="6" y="13" width="8" height="1.4" rx="0.7" fill="#4B5563"/>
            </svg>
            <span>{{'text_heading_filter'|_}}</span>
        </button>
        {% partial 'off-canvas/off-canvas'
            sPosition = 'right'
            sHeading = 'heading_filters'|_
            sCanvasClasses = 'pl-0 pr-0 cursor-auto md:pr-20 md:pl-10'
            sBackgroundClass = 'bg-white'
            sHeaderClasses = 'mr-4 ml-4 md:mr-0 md:ml-0'
            sTemplateWorkType = 'detach'
            body
        %}
            <div class="mt-6">
                <div>
                    <details
                        class="border-t border-b border-gray-300"
                        {{fMinPriceFilterValue or fMaxPriceFilterValue or bSaleFilter ? 'open'}}
                    >
                        <summary class="text-base font-medium text-blue-800 cursor-pointer pb-4 pt-4 pl-4 pr-5 after:right-5 after:text-blue-800 focus-visible:text-blue-800 focus-visible:outline-2 focus-visible:outline-dotted focus-visible:outline-blue-800">
                            {{'heading_filter_price'|_}}
                        </summary>
                        <div class="flex mb-4 ml-4 mt-3 mr-5">
                            <fieldset class="mr-3 w-full">
                                <legend class="sr-only">{{'heading_filter_price'|_}}&nbsp;{{'text_properties_filter_min'|_}}</legend>
                                {% partial 'input/input'
                                    sLabelText = 'text_properties_filter_min'|_
                                    inputClass = '_shopaholic-price-filter appearance-none'
                                    type = 'number'
                                    name = 'filter-min-price'
                                    value = fMinPriceFilterValue
                                    sId = 'min-price'
                                %}
                            </fieldset>
                            <fieldset class="w-full">
                                <legend class="sr-only">{{'heading_filter_price'|_}}&nbsp;{{'text_properties_filter_max'|_}}</legend>
                                {% partial 'input/input'
                                    sLabelText = 'text_properties_filter_max'|_
                                    inputClass = '_shopaholic-price-filter appearance-none'
                                    type= 'number'
                                    name= 'filter-max-price'
                                    value = fMaxPriceFilterValue
                                    sId = 'max-price'
                                %}
                            </fieldset>
                        </div>
                        <div class="_shopaholic-sale-filter-wrapper mb-4" data-filter-type="checkbox">
                            {% partial 'input-checkbox/input-checkbox'
                                sLabelText = 'input_checkbox_discount'|_
                                sPartialClasses = 'flex items-center mb-3 mx-4'
                                sInputClass = 'rounded-sm'
                                sChecked = bSaleFilter
                                sId = 'sale-filter'
                                sName = 'sale'
                                sValue = 1
                            %}
                        </div>
                    </details>
                    {% for obProperty in obProductPropertyList if obProperty.hasValue() %}
                        <details 
                            class="_filter-details border-b border-gray-300"
                            id = "{{obProperty.id}}"
                        >
                            <summary class="text-base font-medium text-blue-800 cursor-pointer pb-4 pt-4 pl-4 pr-5 after:right-5 focus-visible:text-blue-800 focus-visible:outline-2 focus-visible:outline-dotted focus-visible:outline-blue-800">
                                {{ obProperty.name }}
                            </summary>
                            {% if obProperty.filter_type == 'between' %}
                                <div class="flex mb-7 ml-4 mr-5 mt-3 _shopaholic-filter-wrapper" data-filter-type="{{ obProperty.filter_type }}" data-property-id="{{ obProperty.id }}">
                                    <div class="_filter-range flex" data-filter-id="{{ obProperty.id }}">
                                        <fieldset class="mr-3 w-full">
                                            <legend class="sr-only">{{ obProperty.name }}&nbsp;{{'text_properties_filter_min'|_}}</legend>
                                            {% partial 'input/input'
                                                sLabelText = 'text_properties_filter_min'|_
                                                inputClass = '_min appearance-none'
                                                value = fMinWidthFilterValue
                                                sId = obProperty.name ~ 'min'
                                            %}
                                        </fieldset>
                                        <fieldset class="w-full">
                                            <legend class="sr-only">{{ obProperty.name }}&nbsp;{{'text_properties_filter_min'|_}}</legend>
                                            {% partial 'input/input'
                                                sLabelText = 'text_properties_filter_max'|_
                                                inputClass = '_max appearance-none'
                                                value = fMaxWidthFilterValue
                                                sId = obProperty.name ~ 'max'
                                            %}
                                        </fieldset>
                                    </div>
                                </div>
                            {% endif %}
                            {% if obProperty.filter_type == 'checkbox' %}
                                <div class="flex mb-2 ml-4 mt-3 mr-5 _shopaholic-filter-wrapper" data-filter-type="{{ obProperty.filter_type }}" data-property-id="{{ obProperty.id }}">
                                    {% set obPropertyValueList = obProperty.property_value.sort() %}
                                    {% if obProperty.code != 'Color' %}
                                        <fieldset class="mr-3 w-full">
                                            <legend class="sr-only">{{ obProperty.name }}</legend>
                                            {% for obValue in obPropertyValueList %}
                                                {% set bChecked = arFilterValue[obProperty.id] is not empty and obValue.slug in arFilterValue[obProperty.id] %}
                                                {% set bDisabled = false %}
                                                {% if bChecked == false and arFilterValueWithoutProperty[obProperty.id] is not empty %}
                                                    {% set obProductListTemp = obProductList.copy().filterByProperty(arFilterValueWithoutProperty[obProperty.id], obProductPropertyList).filterByProperty(arFilterValueWithoutProperty[obProperty.id], obOfferPropertyList) %}
                                                    {% set bDisabled = obValue.isDisabled(obProductListTemp) %}
                                                {% endif %}

                                                {% partial 'input-checkbox/input-checkbox'
                                                    sLabelText = obValue.value
                                                    sPartialClasses = 'flex items-center mb-4'
                                                    sInputClass = 'rounded-sm disabled:opacity-20'
                                                    sDisabled = bDisabled
                                                    sChecked = bChecked
                                                    sId = obValue.slug
                                                    sValue = obValue.slug
                                                %}
                                            {% endfor %}
                                        </fieldset>
                                    {% endif %}
                                    {% if obProperty.code == 'Color' %}
                                        <fieldset class="flex flex-wrap">
                                            <legend class="sr-only">{{ obProperty.name }}</legend>
                                            {% partial 'input-checkbox-color/input-checkbox-color'
                                                obPropertyValueList = obPropertyValueList
                                                obProperty = obProperty
                                                sPartialClasses = 'mr-3'
                                            %}
                                        </fieldset>
                                    {% endif %}
                                </div>
                            {% endif %}
                        </details>
                    {% endfor %}
                </div>
                <div class="ml-4 mr-5">
                    {% partial 'button/button'
                        sText = 'link_see_all'|_
                        sPartialClasses = '_hide _product-count w-full mt-8'
                    %}
                </div>
            </div>
        {% endpartial %}
    </div>
</div>

<template class="_filterTemplate">
    <div class="pr-12 hidden md:block">
        <div class="w-72">
            <h2 class="text-gray-900 text-lg font-medium mb-3">{{'heading_filters'|_}}</h2>
            <details
                {{fMinPriceFilterValue or fMaxPriceFilterValue or bSaleFilter ? 'open'}}
            >
                <summary class="text-base font-medium text-blue-800 cursor-pointer mb-4 after:text-blue-800 hover:text-blue-700 focus-visible:text-blue-800 focus-visible:outline-2 focus-visible:outline-dotted focus-visible:outline-blue-800">
                    {{'heading_filter_price'|_}}
                </summary>
                <div class="flex mb-4">
                    <fieldset class="mr-3">
                        <legend class="sr-only">{{'heading_filter_price'|_}}&nbsp;{{'text_properties_filter_min'|_}}</legend>
                        {% partial 'input/input'
                            sLabelText = 'text_properties_filter_min'|_
                            inputClass = '_shopaholic-price-filter appearance-none quantity_input'
                            type = 'number'
                            name = 'filter-min-price'
                            value = fMinPriceFilterValue
                            sId = 'min-price'
                        %}
                    </fieldset>
                    <fieldset>
                        <legend class="sr-only">{{'heading_filter_price'|_}}&nbsp;{{'text_properties_filter_max'|_}}</legend>
                        {% partial 'input/input'
                            sLabelText = 'text_properties_filter_max'|_
                            inputClass = '_shopaholic-price-filter appearance-none quantity_input'
                            type = 'number'
                            name = 'filter-max-price'
                            value = fMaxPriceFilterValue
                            sId = 'max-price'
                        %}
                    </fieldset>
                </div>
                <div class="_shopaholic-sale-filter-wrapper mb-4" data-filter-type="checkbox">
                    {% partial 'input-checkbox/input-checkbox'
                        sLabelText = 'input_checkbox_discount'|_
                        sPartialClasses = 'flex items-center'
                        sInputClass = 'rounded-sm'
                        sChecked = bSaleFilter
                        sId = 'sale-filter'
                        sName = 'sale'
                        sValue = 1
                    %}
                </div>
            </details>

            {% for obProperty in obProductPropertyList if obProperty.hasValue() %}
                <details
                    class="_filter-details"
                    id = "{{obProperty.id}}"
                >
                    <summary class="text-base font-medium text-blue-800 cursor-pointer mb-3 hover:text-blue-700 focus-visible:text-blue-800 focus-visible:outline-2 focus-visible:outline-dotted focus-visible:outline-blue-800">
                        {{ obProperty.name }}
                    </summary>
                    <div class="flex _shopaholic-filter-wrapper {{obProperty.filter_type == 'between' ? 'mb-4' : ''}}" data-filter-type="{{ obProperty.filter_type }}" data-property-id="{{ obProperty.id }}">
                        {% if obProperty.filter_type == 'between' %}
                            <div class="_filter-range flex" data-filter-id="{{ obProperty.id }}">
                                <fieldset class="mr-3">
                                    <legend class="sr-only">{{ obProperty.name }}&nbsp;{{'text_properties_filter_min'|_}}</legend>
                                    {% partial 'input/input'
                                        sLabelText = 'text_properties_filter_min'|_
                                        inputClass = '_min appearance-none quantity_input'
                                        sId = obProperty.name ~ 'min'
                                        type = 'number'
                                    %}
                                </fieldset>
                                <fieldset>
                                    <legend class="sr-only">{{ obProperty.name }}&nbsp;{{'text_properties_filter_max'|_}}</legend>
                                    {% partial 'input/input'
                                        sLabelText = 'text_properties_filter_max'|_
                                        inputClass = '_max appearance-none quantity_input'
                                        sId = obProperty.name ~ 'max'
                                        type = 'number'
                                    %}
                                </fieldset>
                            </div>
                        {% endif %}
                        {% if obProperty.filter_type == 'checkbox' %}
                            {% set obPropertyValueList = obProperty.property_value.sort() %}
                            {% if obProperty.code != 'Color' %}
                                <fieldset class="flex flex-col">
                                    <legend class="sr-only">{{ obProperty.name }}</legend>
                                    {% for obValue in obPropertyValueList %}
                                        {% set bChecked = arFilterValue[obProperty.id] is not empty and obValue.slug in arFilterValue[obProperty.id] %}
                                        {% set bDisabled = false %}
                                        {% if bChecked == false and arFilterValueWithoutProperty[obProperty.id] is not empty %}
                                            {% set obProductListTemp = obProductList.copy().filterByProperty(arFilterValueWithoutProperty[obProperty.id], obProductPropertyList).filterByProperty(arFilterValueWithoutProperty[obProperty.id], obOfferPropertyList) %}
                                            {% set bDisabled = obValue.isDisabled(obProductListTemp) %}
                                        {% endif %}

                                        {% partial 'input-checkbox/input-checkbox'
                                            sLabelText = obValue.value
                                            sPartialClasses = 'flex items-center mb-4'
                                            sInputClass = 'rounded-sm disabled:opacity-20'
                                            sDisabled = bDisabled
                                            sChecked= bChecked
                                            sId = obValue.slug
                                            sValue = obValue.slug
                                        %}
                                    {% endfor %}
                                </fieldset>
                            {% endif %}
                            {% if obProperty.code == 'Color' %}
                                <fieldset class="flex flex-wrap">
                                    <legend class="sr-only">{{ obProperty.name }}</legend>
                                    {% partial 'input-checkbox-color/input-checkbox-color'
                                        obPropertyValueList = obPropertyValueList
                                        obProperty = obProperty
                                    %}
                                </fieldset>
                            {% endif %}
                        {% endif %}
                    </div>
                </details>
            {% endfor %}
        </div>
    </div>
</template>
