title = "Account Details"
url = "/account/details"
layout = "main"
is_hidden = 0

[UserPage]
slug = "{{ :slug }}"
slug_required = 0
mode = "ajax"
flash_on = 0
redirect_on = 0
redirect_page = "account/account"
login_page = "sign-in/sign-in"
==
<?php
function onInit()
{
    $this['path_page_js'] = mix('assets/dist/js/account-details.js', 'themes/lovata-tailwind-shopaholic');

    $bHasPlugin = \System\Classes\PluginManager::instance()->hasPlugin('lovata.buddies')
        && !\System\Classes\PluginManager::instance()->isDisabled('Lovata.Buddies');

    if (!$bHasPlugin) {
        return $this->controller->run('404');
    }
}
?>
==
{% set obUser = UserData.get() %}
{% set arBreadcrumbs = [
    {'name': 'account_my_account'|_, 'url': 'account/account'|page},
    {'name': 'account_personal_data'|_, 'url': null},
] %}

{% partial 'breadcrumbs/breadcrumbs' %}
<h1 class="font-medium uppercase text-xl md:text-3xl mb-4">{{'account_personal_data'|_}}</h1>
<div class="sm:max-w-xs mt-7 mb-8 md:mb-16">
    <span class="text-gray-600 text-sm md:text-base mb-4 inline-block">*{{'form_required_fields'|_}}</span>
    <form class="_required">
        {% partial 'input/input'
            labelText = 'form_user_name'|_
            type = 'text'
            sId = 'name'
            sName = 'name'
            sValue = obUser.name
            required = 'required'
        %}
        {# TODO: Add inline ajax validation for name existing #}
        {% partial 'input/input'
            labelText = 'form_user_email'|_
            sType = 'email'
            sId = 'mail'
            sName = 'mail'
            sValue = obUser.email
            required = 'required'
            partialClasses = 'mt-4'
        %}
        {# TODO: Add inline ajax validation for email existing #}
        {% partial 'input/input'
            labelText = 'form_user_phone'|_
            sType = 'text'
            sId = 'phone'
            sName = 'phone'
            sValue = obUser.phone
            partialClasses = 'mt-4'
        %}
        {# TODO: Add inline ajax validation for Phone number format #}
        {% partial 'input/input'
            labelText = 'form_user_country'|_
            sType = 'text'
            sId = 'country'
            sName = 'country'
            sValue = obUser.address.country
            partialClasses = 'mt-4'
        %}
        {% partial 'input/input'
            labelText = 'form_user_city'|_
            sType = 'text'
            sId = 'city'
            sName = 'city'
            sValue = obUser.address.city
            partialClasses = 'mt-4'
        %}
        {% partial 'input/input'
            labelText = 'form_user_zip_code'|_
            sType = 'text'
            sId = 'zip'
            sName = 'zip'
            sValue = obUser.address.zip
            partialClasses = 'mt-4'
        %}
        {% partial 'input/input'
            labelText = 'form_user_address_postal'|_
            sType = 'text'
            sId = 'address'
            sName = 'address'
            sValue = obUser.address.address
            partialClasses = 'mt-4'
        %}
        {% partial 'button/button' sText = 'form_save'|_ sType = 'submit' partialClasses = 'w-full md:w-auto mt-8' %}
    </form>
</div>
