title = "Catalog Item"
url = "/catalog/:category/:product"
layout = "main"
is_hidden = 0

[CategoryPage]
slug = "{{ :category }}"
slug_required = 1
smart_url_check = 0
has_wildcard = 0
skip_error = 0

[ProductPage]
slug = "{{ :product }}"
slug_required = 1
smart_url_check = 0
skip_error = 0

[ProductList]
sorting = "no"

[ProductData]
==
<?php
function onStart()
{
    //Get product and first offer item
    $obProductItem = $this->ProductPage->get();
    if (empty($obProductItem)) {
        return;
    }
    $this['obProduct'] = $obProductItem;
}

function onInit()
{
    $this['path_page_js'] = mix('assets/dist/js/product-item.js', 'themes/lovata-tailwind-shopaholic');
}
?>
==
{##}

{% partial 'breadcrumbs/breadcrumbs' %} {# TODO: Fix wrong breadcrumbs #}

{% set obPropertyList = obProduct.property %}

{% partial 'tabs/tabs' 
    sPartialClasses = '_tabs-product'
    body
%}
    {% for tab in this.theme.product_page %}
        <li data-title="{{tab.title}}">
            {% if tab.dropdown == 'product_detail' %}
                <div class="flex flex-col md:flex-row" >
                    {% if obPropertyList.getByCode('width').property_value.getValueString() != '' or obPropertyList.getByCode('height').property_value.getValueString() != '' or obPropertyList.getByCode('depth').property_value.getValueString() != '' or obPropertyList.getByCode('weight').property_value.getValueString() != '' %}
                        <div class="w-full md:w-1/2 mt-4 md:mt-0">
                            <table>
                                <caption class="text-left w-max font-bold pb-2">{{'text_product_meauserements'|_}}:</caption>
                                <tbody class="flex flex-col space-y-2">
                                    {% if obPropertyList.isNotEmpty() %}
                                        {% for obProperty in obPropertyList if (obProperty.name !='Color' and obProperty.name !='Sale' and obProperty.name !='Materials') %}
                                            {% if obProperty.property_value.getValueString() %}    
                                                <tr>
                                                    <th class="text-left min-w-18 font-normal text-gray-600">{{ obProperty.name }}</th>
                                                    <td class="pl-1.5">{{ obProperty.property_value.getValueString() }} 
                                                        {% if obProperty.name == 'Weight' %}
                                                            kg
                                                        {% else %}
                                                            cm
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                            {% endif %}
                                        {% endfor %}
                                    {% endif %}
                                </tbody>
                            </table>
                        </div>
                    {% endif %}
                    {% if obPropertyList.getByCode('materials').property_value.getValueString() != '' %}
                        <div class="w-full md:w-1/2 mt-4 md:mt-0">
                            <table>
                                <caption class="text-left w-max font-bold pb-2">{{'text_materials'|_}}:</caption>
                                <tbody class="flex flex-col space-y-2">
                                    {% if obPropertyList.isNotEmpty() %}
                                        {% for obProperty in obPropertyList if (obProperty.name !='Width' and obProperty.name !='Color' and obProperty.name !='Sale' and obProperty.name !='Height' and obProperty.name !='Depth' and obProperty.name !='Weight') %}
                                            {% for obPropertyValue in obProperty.property_value %}
                                                <tr>
                                                    <th class="text-left min-w-18 font-normal text-gray-600">{{ obPropertyValue.value }}</th>
                                                    <td class="pl-1.5">100%</td>
                                                </tr>
                                            {% endfor %}
                                        {% endfor %}
                                    {% endif %}
                                </tbody>
                            </table>
                        </div>
                    {% endif %}
                </div>
            {% else %}
                <article class="prose md:prose-lg" >
                    <div class="flex flex-col space-y-2" >
                        {{tab.richeditor|raw}}
                    </div>
                </article>
            {% endif %}
        </li>
    {% endfor %}
{% endpartial %}
{% if this.theme.has_viewed_products %}
    {% partial 'product-list-small/product-list-small'
        sProductListSmallType = sProductListSmallTypeViewedProducts
        sSectionHeading = 'heading_product_list_small_recently_viewed'|_
        sSectionHeadingLevel = 2
        iTake = 4
    %}
{% endif %}
{% if this.theme.has_related_products %}
    {% partial 'product-list-small/product-list-small'
        sProductListSmallType = sProductListSmallTypeRelatedProducts
        obProduct = obProduct
        sSectionHeading = 'heading_product_list_small_you_might_also_like'|_
        sSectionHeadingLevel = 2
        iTake = 4
    %}
{% endif %}
