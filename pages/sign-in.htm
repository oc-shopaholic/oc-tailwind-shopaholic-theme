title = "Sign In"
url = "/sign-in"
layout = "main"
is_hidden = 0

[Login]
redirect_on = 1
redirect_page = "account/account"
mode = "ajax"
==
<?php
function onInit()
    {
        $this['path_page_js'] = mix('assets/dist/js/sign-in.js', 'themes/lovata-tailwind-shopaholic');

        $obUser = $this['obUser'];
        $bHasPlugin = \System\Classes\PluginManager::instance()->hasPlugin('lovata.buddies')
            && !\System\Classes\PluginManager::instance()->isDisabled('lovata.buddies');

        if (!$bHasPlugin || !empty($obUser)) {
            return $this->controller->run('404');
        }
    }
?>
==
<div class="mt-7 mb-14 flex flex-col items-center">
    <h1 class="font-medium uppercase text-xl md:text-3xl mb-4">{{ 'account_signing_in'|_ }}</h1>
    <div class="max-w-xs">
        <form class="_required">
            {# TODO: To discuss validation message layout shift #}
            {% partial 'input/input'
                sId = 'form-email'
                sLabelText = 'form_user_email'|_
                sName = 'email'
                sRequired = 'required'
                sType = 'email'
            %}
            {# TODO: Add inline ajax validation for email existing #}
            {% partial 'input/input'
                sId = 'form-password'
                sLabelText = 'form_user_password'|_
                sName = 'password'
                sRequired = 'required'
                sType = 'password'
                sPartialClasses = 'mt-4'
            %}
            <div class="mt-4 text-right">
                <a href="{{ 'password-reset/password-reset'|page }}" class="text-blue-800 hover:text-blue-700 active:text-blue-900 focus-visible:outline-blue underline hover:no-underline text-sm md:text-base">{{ 'account_password_forgot'|_ }}</a>
            </div>
            {% partial 'input-checkbox/input-checkbox'
                sPartialClasses = 'mt-4 md:mt-3 flex items-center'
                sId = 'remember_me'
                sName = 'remember_me'
                sLabelText = 'form_user_keep_signed'|_
            %}
            {% partial 'button/button'
                sText = 'account_sign_in'|_
                sType = 'submit'
                sPartialClasses = '_button-sign-in w-full mt-8 md:mt-6'
            %}
            {# TODO: Add inline ajax validation #}
        </form>
        {% set account_sign_up = '<a class="text-blue-800 hover:text-blue-700 active:text-blue-900 focus-visible:outline-blue underline hover:no-underline text-sm md:text-base" href="'~( 'sign-up/sign-up'|page )~'">'~('account_sign_up'|_)~'</a>' %}
        <span class="block text-center text-gray-600 text-sm md:text-base mt-8 md:mt-7">{{ 'account_no_account_sign_up' | transRaw({account_sign_up: account_sign_up}) }}</span>
    </div>
</div>
